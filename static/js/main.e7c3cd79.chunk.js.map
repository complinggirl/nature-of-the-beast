{"version":3,"sources":["utils/uuid.js","utilities/BaseUtility.ts","utilities/Echo.ts","utilities/Help.ts","locations/BaseLocation.ts","locations/SomebodyOnceLoved.ts","locations/ColdCabin.ts","locations/QuietForest.ts","BigStateObject.ts","utilities/Ls.ts","utilities/WhoAmI.ts","utilities/Pwd.ts","utilities/UtilityManifest.ts","utilities/Cd.ts","components/Terminal.tsx","index.tsx","components/App.tsx"],"names":["b","a","Math","random","toString","replace","BaseUtility","_args","_writeToConsole","Echo","args","writeToConsole","join","Help","concat","Object","keys","UtilityManifest","BaseLocation","SomebodyOnceLoved","description","neighbors","ColdCabin","slug","QuietForest","BigStateObject","location","Ls","map","sort","WhoAmI","this","responses","forEach","response","index","window","setTimeout","Pwd","echo","help","ls","whoami","cd","newLocation","find","pwd","INPUT_PROMPT","Terminal","state","terminalHistory","content","id","uuid","commandHistory","currentPlaceInHistory","inputEl","handleKeyDown","e","key","_this","goBackInHistory","goForwardInHistory","setState","length","command","inputValue","handleSubmit","preventDefault","value","addToCommandHistory","_value$split","split","_value$split2","toArray","utilityName","slice","utility","run","toConsumableArray","_this2","react_default","createElement","className","onClick","focus","onKeyDown","reduce","memo","historyItem","onSubmit","type","ref","React","Component","ReactDOM","render","Terminal_Terminal","document","getElementById"],"mappings":"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","file":"static/js/main.e7c3cd79.chunk.js","sourcesContent":["// simplest UUID implementation\n// https://gist.github.com/jed/982883\n\nexport default function b(a) {\n\treturn a\n\t\t? (a ^ ((Math.random() * 16) >> (a / 4))).toString(16)\n\t\t: ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, b);\n}\n","export default class BaseUtility {\n\tstatic run(_args: string[], _writeToConsole?: (string) => void): void {\n\t\tthrow 'not implemented';\n\t}\n}\n","import BaseUtility from './BaseUtility';\n\nexport default class Echo extends BaseUtility {\n\tstatic run(args: string[], writeToConsole): void {\n\t\twriteToConsole(args.join(' '));\n\t}\n}\n","import BaseUtility from './BaseUtility';\nimport UtilityManifest from './UtilityManifest';\n\nexport default class Help extends BaseUtility {\n\tstatic run(_args: string[], writeToConsole): void {\n\t\twriteToConsole(\n\t\t\t`the following utilities are available: ${Object.keys(\n\t\t\t\tUtilityManifest\n\t\t\t).join(', ')}`\n\t\t);\n\t}\n}\n","export default class BaseLocation {\n\tstatic description: string;\n\tstatic neighbors: typeof BaseLocation[];\n\tstatic slug: string;\n}\n","import BaseLocation from './BaseLocation';\nimport ColdCabin from './ColdCabin';\n\nexport default class SomebodyOnceLoved extends BaseLocation {\n\tstatic description =\n\t\t'Someone somebody once loved, probably, is sitting at an old kitchen table. They are an adult, but beyond that you struggle to make out anything about them. The stench is magnificent.';\n\n\tstatic neighbors = [ColdCabin];\n\n\tstatic slug = 'somebody_once_loved';\n}\n","import BaseLocation from './BaseLocation';\nimport QuietForest from './QuietForest';\nimport SomebodyOnceLoved from './SomebodyOnceLoved';\n\nexport default class ColdCabin extends BaseLocation {\n\tstatic description = 'it is a cold cabin';\n\n\tstatic neighbors = [QuietForest, SomebodyOnceLoved];\n\n\tstatic slug = 'a_cold_cabin';\n}\n","import BaseLocation from './BaseLocation';\nimport ColdCabin from './ColdCabin';\n\nexport default class QuietForest extends BaseLocation {\n\tstatic description =\n\t\t'It is early morning. Cold rain is melting the remaining pieces of ice and snow clinging to the evergreens and you can hear them falling around you. Some of them are large enough to be dangerous, but mostly it is just uncomfortable. Your cotton blouse is not keeping you warm.';\n\n\tstatic neighbors = [ColdCabin];\n\n\tstatic slug = 'a_quiet_forest';\n}\n","import BaseLocation from './locations/BaseLocation';\nimport QuietForest from './locations/QuietForest';\n\ninterface BigStateInterface {\n\tlocation: typeof BaseLocation;\n}\n\nconst BigStateObject: BigStateInterface = {\n\tlocation: QuietForest\n};\n\nexport default BigStateObject;\n","import BaseUtility from './BaseUtility';\nimport BigStateObject from '../BigStateObject';\n\nexport default class Ls extends BaseUtility {\n\tstatic run(_args: string[], writeToConsole): void {\n\t\twriteToConsole(\n\t\t\tBigStateObject.location.neighbors\n\t\t\t\t.map(location => location.slug)\n\t\t\t\t.sort()\n\t\t\t\t.join('    ')\n\t\t);\n\t}\n}\n","import BaseUtility from './BaseUtility';\n\nexport default class WhoAmI extends BaseUtility {\n\tprivate static responses: string[] = [\n\t\t\"I don't remember\",\n\t\t'I am glad you asked. I am glad you are here.',\n\t\t\"I don't know who you are\",\n\t\t'You are an echo of an echo',\n\t\t'You are a grease smudge on a screen',\n\t\t'You were a mistake',\n\t\t'You are a dog lover',\n\t\t'Or you were a dog lover'\n\t];\n\n\tstatic run(_args: string[], writeToConsole): void {\n\t\tthis.responses.forEach((response, index) => {\n\t\t\twindow.setTimeout(() => {\n\t\t\t\twriteToConsole(response);\n\t\t\t}, 1000 + 2500 * index);\n\t\t});\n\t}\n}\n","import BaseUtility from './BaseUtility';\nimport BigStateObject from '../BigStateObject';\n\nexport default class Pwd extends BaseUtility {\n\tstatic run(_args: string[], writeToConsole): void {\n\t\twriteToConsole(BigStateObject.location.description);\n\t}\n}\n","import Echo from './Echo';\nimport Help from './Help';\nimport BaseUtility from './BaseUtility';\nimport Ls from './Ls';\nimport WhoAmI from './WhoAmI';\nimport Pwd from './Pwd';\nimport Cd from './Cd';\n\nconst UtilityManifest: { [s: string]: typeof BaseUtility } = {\n\techo: Echo,\n\thelp: Help,\n\tls: Ls,\n\twhoami: WhoAmI,\n\tcd: Cd,\n\tpwd: Pwd\n};\n\nexport default UtilityManifest;\n","import BaseUtility from './BaseUtility';\nimport BigStateObject from '../BigStateObject';\n\nexport default class Cd extends BaseUtility {\n\tstatic run(args: string[], writeToConsole): void {\n\t\tconst newLocation = BigStateObject.location.neighbors.find(location => {\n\t\t\treturn location.slug === args[0];\n\t\t});\n\n\t\tif (newLocation) {\n\t\t\tBigStateObject.location = newLocation;\n\t\t\treturn;\n\t\t}\n\n\t\twriteToConsole(`invalid location ${args[0]}`);\n\t}\n}\n","import React from 'react';\nimport uuid from '../utils/uuid';\nimport UtilityManifest from '../utilities/UtilityManifest';\n\ninterface ICommandItem {\n\tcontent: string;\n\tid: string;\n}\n\ninterface IHistoryItem {\n\tcontent: string;\n\tid: string;\n}\n\ninterface IState {\n\tcommandHistory: ICommandItem[];\n\tterminalHistory: IHistoryItem[];\n\tcurrentPlaceInHistory?: number;\n}\n\ninterface IProps {}\n\nconst INPUT_PROMPT = '~/ > ';\n\nexport default class Terminal extends React.Component<IProps, IState> {\n\tstate: IState = {\n\t\tterminalHistory: [\n\t\t\t{ content: 'welcome to the forest', id: uuid() },\n\t\t\t{ content: 'feel free to look around', id: uuid() }\n\t\t],\n\t\tcommandHistory: [],\n\t\tcurrentPlaceInHistory: -1\n\t};\n\n\tprivate inputEl: HTMLInputElement = null;\n\n\tprivate handleKeyDown = (e: React.KeyboardEvent<HTMLDivElement>) => {\n\t\tswitch (e.key) {\n\t\t\tcase 'ArrowUp':\n\t\t\t\tthis.goBackInHistory();\n\t\t\t\tbreak;\n\t\t\tcase 'ArrowDown':\n\t\t\t\tthis.goForwardInHistory();\n\t\t\t\tbreak;\n\t\t\tcase 'Tab':\n\t\t\t\tthis.writeToConsole('tab completion not yet available');\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\tprivate goBackInHistory = () => {\n\t\tthis.setState(\n\t\t\tstate => {\n\t\t\t\tif (\n\t\t\t\t\tstate.currentPlaceInHistory ===\n\t\t\t\t\tstate.commandHistory.length + 1\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\tcurrentPlaceInHistory: state.currentPlaceInHistory + 1\n\t\t\t\t};\n\t\t\t},\n\t\t\t() => {\n\t\t\t\tconst command = this.state.commandHistory[\n\t\t\t\t\tthis.state.currentPlaceInHistory\n\t\t\t\t];\n\n\t\t\t\tif (command) {\n\t\t\t\t\tthis.inputValue = command.content;\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t};\n\n\tprivate goForwardInHistory = () => {\n\t\tthis.setState(\n\t\t\tstate => {\n\t\t\t\tif (state.currentPlaceInHistory === -1) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\tcurrentPlaceInHistory: state.currentPlaceInHistory - 1\n\t\t\t\t};\n\t\t\t},\n\t\t\t() => {\n\t\t\t\tif (this.state.currentPlaceInHistory === -1) {\n\t\t\t\t\tthis.inputValue = '';\n\t\t\t\t}\n\n\t\t\t\tconst command = this.state.commandHistory[\n\t\t\t\t\tthis.state.currentPlaceInHistory\n\t\t\t\t];\n\n\t\t\t\tif (command) {\n\t\t\t\t\tthis.inputValue = command.content;\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t};\n\n\tprivate get inputValue(): string {\n\t\treturn this.inputEl && this.inputEl.value;\n\t}\n\n\tprivate set inputValue(value: string) {\n\t\tif (this.inputEl) {\n\t\t\tthis.inputEl.value = value;\n\t\t}\n\t}\n\n\tprivate handleSubmit = (e: React.FormEvent<HTMLFormElement>) => {\n\t\te.preventDefault();\n\n\t\tconst value = this.inputValue;\n\t\tthis.inputValue = '';\n\n\t\tthis.addToCommandHistory(value);\n\n\t\tconst [utilityName, ...args] = value.split(' ');\n\n\t\tconst utility = UtilityManifest[utilityName];\n\n\t\tthis.writeToConsole(`${INPUT_PROMPT}${value}`);\n\n\t\tutility\n\t\t\t? utility.run(args, this.writeToConsole)\n\t\t\t: this.writeToConsole(`I don't know how to ${utilityName}`);\n\t};\n\n\tprivate addToCommandHistory = (value: string) => {\n\t\tthis.setState(state => ({\n\t\t\tcommandHistory: [\n\t\t\t\t{\n\t\t\t\t\tcontent: value,\n\t\t\t\t\tid: uuid()\n\t\t\t\t},\n\t\t\t\t...state.commandHistory\n\t\t\t],\n\t\t\tcurrentPlaceInHistory: -1\n\t\t}));\n\t};\n\n\tprivate writeToConsole = (value: string) => {\n\t\tthis.setState(state => ({\n\t\t\tterminalHistory: [\n\t\t\t\t...state.terminalHistory,\n\t\t\t\t{\n\t\t\t\t\tcontent: value,\n\t\t\t\t\tid: uuid()\n\t\t\t\t}\n\t\t\t]\n\t\t}));\n\t};\n\n\trender() {\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclassName=\"terminal\"\n\t\t\t\tonClick={() => {\n\t\t\t\t\tthis.inputEl && this.inputEl.focus();\n\t\t\t\t}}\n\t\t\t\tonKeyDown={this.handleKeyDown}\n\t\t\t>\n\t\t\t\t<pre className=\"terminal-buffer\">\n\t\t\t\t\t{this.state.terminalHistory.reduce(\n\t\t\t\t\t\t(memo, historyItem) =>\n\t\t\t\t\t\t\t`${memo}\\n${historyItem.content}`,\n\t\t\t\t\t\t''\n\t\t\t\t\t)}\n\t\t\t\t</pre>\n\n\t\t\t\t<form className=\"input-form\" onSubmit={this.handleSubmit}>\n\t\t\t\t\t<span className=\"input-prompt\">{INPUT_PROMPT}</span>\n\t\t\t\t\t<input\n\t\t\t\t\t\tclassName=\"input\"\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tref={e => {\n\t\t\t\t\t\t\tthis.inputEl = e;\n\t\t\t\t\t\t\tthis.inputEl && this.inputEl.focus();\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './styles/index.scss';\nimport App from './components/App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n","import React from 'react';\nimport Terminal from './Terminal';\n\nexport default function App() {\n\treturn (\n\t\t<div className=\"main\">\n\t\t\t<Terminal />\n\t\t</div>\n\t);\n}\n"],"sourceRoot":""}