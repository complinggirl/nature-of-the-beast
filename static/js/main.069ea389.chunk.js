(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e){e.exports=[{slug:"old_knife",description:"most objects carry with them anonymity. This knife does not: it was owned and loved as deeply as an object could be loved. It lived many lives.",locationSlug:"a_cold_cabin"}]},19:function(e){e.exports=[{slug:"a_quiet_forest",descriptions:[{text:"it is early morning",timer:100},{text:"cold rain is melting the remaining snow hanging from the boughs of the surround trees",timer:1500},{text:"you are surrounded by evergreens.",timer:500},{text:"douglas fir",timer:1e3},{text:"you can make out a path heading into the fog",timer:1500}]},{slug:"a_cold_cabin",descriptions:[{text:"it is a cold cabin"},{text:"someone somebody once loved, probably, is here"},{text:"sitting alone at a table set for two,"},{text:"dead."},{text:"diffuse light flows and pools and illuminates"}]},{slug:"somebody_once_loved",descriptions:[{text:"They are an adult, but beyond that you struggle to make out anything about them. The stench is magnificent."}]}]},20:function(e){e.exports=[["a_quiet_forest","a_cold_cabin"],["a_cold_cabin","somebody_once_loved"]]},23:function(e,t,n){e.exports=n(35)},28:function(e,t,n){},35:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),r=n(18),i=n.n(r),c=(n(28),n(1)),s=n(2),u=n(4),l=n(3),h=n(5),p=n(7),m=n(13);function f(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,f)}var d=function(){function e(){Object(c.a)(this,e),this.command="",this.helpDescription=""}return Object(s.a)(e,[{key:"run",value:function(e){throw"not implemented"}}]),e}(),v=function(e){function t(){var e,n;Object(c.a)(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).command="echo",n.helpDescription="Use echo to say something out loud. Example:\n\necho Is anyone there?",n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"run",value:function(e){var t=e.args;return(0,e.writeToConsole)(t.join(" ")),Promise.resolve(null)}}]),t}(d),O=function(e){function t(){var e,n;Object(c.a)(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).command="help",n.helpDescription="Use help to make sense of the world.",n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"run",value:function(e){var t=e.writeToConsole,n=e.args;if(n.length>=1){var o=G[n[0]];t(o?o.helpDescription:"I don't know much about ".concat(n.join(" "),"."))}else t("The following utilities are available: ".concat(Object.keys(G).join(", "),'.\n\nFor help with any particular utility, write "help <utility name>".'));return Promise.resolve(null)}}]),t}(d),y=n(8),b=n(11),g=function e(t){var n=t.descriptions,o=t.slug;Object(c.a)(this,e),this.itemSlugs=[],this.neighborSlugs=[],this.descriptions=n,this.slug=o},w=n(19),j=n(20),E=n(10),T=new g({slug:"loading",descriptions:[{text:"loading"}]}),C={loading:T},S=!1;var k,_=C;!function(e){e.SET_LOCATION="SET_LOCATION",e.POP_LOCATION_STACK="POP_LOCATION_STACK",e.PUSH_LOCATION_STACK="PUSH_LOCATION_STACK",e.LOCK_CONSOLE="LOCK_CONSOLE",e.RELEASE_CONSOLE="RELEASE_CONSOLE",e.ADD_TO_INVENTORY="ADD_TO_INVENTORY"}(k||(k={}));var I={location:T.slug,previousLocationStack:[],consoleInteractive:!0,inventory:[]};var A=Object(b.b)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k.SET_LOCATION:return Object(y.a)({},e,{location:t.value});case k.PUSH_LOCATION_STACK:return Object(y.a)({},e,{previousLocationStack:[t.value].concat(Object(p.a)(e.previousLocationStack))});case k.POP_LOCATION_STACK:return Object(y.a)({},e,{previousLocationStack:e.previousLocationStack.slice(1)});case k.LOCK_CONSOLE:return Object(y.a)({},e,{consoleInteractive:!1});case k.RELEASE_CONSOLE:return Object(y.a)({},e,{consoleInteractive:!0});case k.ADD_TO_INVENTORY:return Object(y.a)({},e,{inventory:Object(p.a)(e.inventory).concat([t.value])});default:return e}}),L=A;function N(){return _[A.getState().location]}function P(e){return a.a.createElement("span",null,e.places.map(function(e){return a.a.createElement("span",{key:e,className:"place"},e,$)}),e.items.map(function(e){return a.a.createElement("span",{key:e,className:"item"},e,$)}))}var H=function(e){function t(){var e,n;Object(c.a)(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).command="ls",n.helpDescription="ls lists the locations and objects you can reach from where you are now.",n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"run",value:function(e){return(0,e.writeToConsole)(a.a.createElement(P,{places:N().neighborSlugs.sort(),items:N().itemSlugs.sort()})),Promise.resolve(null)}}]),t}(d),D=function(e){function t(){var e,n;Object(c.a)(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).responses=["I don't remember","But I am glad you asked. I am glad you are here.","I don't know who you are","You are an echo","You were a mistake","You are a dog lover","Or you were"],n.command="whoami",n.helpDescription="Ask a difficult question. Get a difficult response",n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"run",value:function(e){var t=this,n=e.writeToConsole;return new Promise(function(e){t.responses.forEach(function(o,a){window.setTimeout(function(){n(o),a===t.responses.length-1&&e()},1e3+2500*a)})})}}]),t}(d),x=function e(t){var n=t.description,o=t.slug,a=t.locationSlug;Object(c.a)(this,e),this.description=n,this.slug=o,this.locationSlug=a},K={},V=!1;var U=K,R=function(e){function t(){var e,n;Object(c.a)(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).command="look",n.helpDescription="Use look to take some time, to see where you are. Some things take longer to see than others.",n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"run",value:function(e){var t=e.writeToConsole,n=e.args;return"at"===n[0]&&U[n[1]]?(t(U[n[1]].description),Promise.resolve(null)):n.length>0?(t("invalid ".concat(this.command," argument ").concat(n.join(" "),".")),Promise.resolve(null)):new Promise(function(e){var n=0,o=N().descriptions;o.forEach(function(a,r){n+="undefined"===typeof a.timer?1500:a.timer,window.setTimeout(function(){t(a.text),r===o.length-1&&e()},n)})})}}]),t}(d),W=function(e){function t(){var e,n;Object(c.a)(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).command="cd",n.helpDescription="Use cd to move to a new location. For example:\n\ncd a_cold_cabin",n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"goToPreviousLocation",value:function(){var e=L.getState().previousLocationStack[0];L.dispatch({type:k.POP_LOCATION_STACK}),e&&L.dispatch({type:k.SET_LOCATION,value:e})}},{key:"run",value:function(e){var t=e.args,n=e.writeToConsole,o=Promise.resolve(null);if(".."==t[0])return this.goToPreviousLocation(),o;var a=N().neighborSlugs.find(function(e){return e===t[0]});return a?(L.dispatch({type:k.PUSH_LOCATION_STACK,value:L.getState().location}),L.dispatch({type:k.SET_LOCATION,value:a})):n("invalid location ".concat(t[0])),o}}]),t}(d),Y=function(e){function t(){var e,n;Object(c.a)(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).interval=0,n.state={content:(new Date).getTime().toString()},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.interval=window.setInterval(function(){e.setState({content:(new Date).getTime().toString()})},1e3)}},{key:"componentWillUnmount",value:function(){window.clearInterval(this.interval)}},{key:"render",value:function(){return a.a.createElement("span",null,this.state.content)}}]),t}(a.a.Component),F=function(e){function t(){var e,n;Object(c.a)(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).command="time",n.helpDescription="time tells you the time",n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"run",value:function(e){return(0,e.writeToConsole)(a.a.createElement(Y,null)),Promise.resolve(null)}}]),t}(d),q=function(e){function t(){var e,n;Object(c.a)(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).command="pickup",n.helpDescription="pickup will allow you to add an object to your inventory",n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"run",value:function(e){var t=e.args,n=e.writeToConsole,o=t[0];return U[o]&&N().itemSlugs.indexOf(o)>-1?(N().itemSlugs=N().itemSlugs.filter(function(e){return e!==o}),L.dispatch({type:k.ADD_TO_INVENTORY,value:o}),n("I have picked up the ".concat(o))):n("There is no ".concat(o," here")),Promise.resolve(null)}}]),t}(d),B=function(e){function t(){var e,n;Object(c.a)(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).command="inv",n.helpDescription='List all the items currently in your inventory. To use an item, write "use <item>"',n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"run",value:function(e){return(0,e.writeToConsole)(L.getState().inventory.join($)),Promise.resolve(null)}}]),t}(d),M={},J=!1;var G=M,z=n(12),Q=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"terminal-buffer"},this.props.terminalHistory.map(function(e){return a.a.createElement(a.a.Fragment,{key:e.id},e.content," ",a.a.createElement("br",null))}))}}]),t}(a.a.Component),X=function(e){function t(){var e,n;Object(c.a)(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).state={commandHistory:[],currentPlaceInHistory:-1},n.inputEl=null,n.focusOnInput=function(){n.inputEl&&n.inputEl.focus()},n.goBackInHistory=function(){n.setState(function(e){return e.currentPlaceInHistory===e.commandHistory.length-1?null:{currentPlaceInHistory:e.currentPlaceInHistory+1}},function(){var e=n.state.commandHistory[n.state.currentPlaceInHistory];e&&(n.inputValue=e.content)})},n.goForwardInHistory=function(){n.setState(function(e){return-1===e.currentPlaceInHistory?null:{currentPlaceInHistory:e.currentPlaceInHistory-1}},function(){-1===n.state.currentPlaceInHistory&&(n.inputValue="");var e=n.state.commandHistory[n.state.currentPlaceInHistory];e&&(n.inputValue=e.content)})},n.moveCursorToEnd=function(){window.setTimeout(function(){n.inputEl&&(n.inputEl.selectionStart=1e3)},0)},n.handleKeyDown=function(e){switch(e.key){case"ArrowUp":n.goBackInHistory(),n.moveCursorToEnd();break;case"ArrowDown":n.goForwardInHistory(),n.moveCursorToEnd();break;case"Tab":e.preventDefault(),n.tabComplete();break;case"Enter":e.preventDefault(),n.addToCommandHistory(n.inputValue),n.props.handleSubmit(n.inputValue),n.inputValue=""}},n.addToCommandHistory=function(e){n.setState(function(t){return{commandHistory:[{content:e,id:f()}].concat(Object(p.a)(t.commandHistory)),currentPlaceInHistory:-1}})},n.tabComplete=function(){if(""!==n.inputValue){var e=n.inputValue.split(" "),t=Object(m.a)(e),o=t[0],a=t.slice(1),r=a[a.length-1];"undefined"===typeof r&&(r="");var i=Object(p.a)(N().neighborSlugs).concat(Object(p.a)(N().itemSlugs)).filter(function(e){return 0===e.indexOf(r)});switch(i.length){case 0:break;case 1:var c=[o].concat(Object(p.a)(a.slice(0,a.length-1)),[i[0]]).join(" ");n.inputValue=c;break;default:n.props.writeToConsole(i.reduce(function(e,t){return"".concat(e).concat($).concat(t)}))}}},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("click",this.focusOnInput)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("click",this.focusOnInput)}},{key:"render",value:function(){var e=this;return a.a.createElement(a.a.Fragment,null,a.a.createElement("input",{className:"input",type:"text",onKeyDown:this.handleKeyDown,ref:function(t){e.inputEl=t,e.inputEl&&e.inputEl.focus()}}))}},{key:"inputValue",get:function(){return this.inputEl?this.inputEl.value:""},set:function(e){this.inputEl&&(this.inputEl.value=e)}}]),t}(a.a.Component);function Z(){return"~/".concat(L.getState().location," > ")}var $="    ",ee=function(e){function t(){var e,n;Object(c.a)(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).state={terminalHistory:[{content:"you are in a cold and quiet forest",id:f()},{content:"rain has recently fallen",id:f()},{content:'type "help", then press enter, to get started',id:f()}]},n.consoleWriters=[],n.handleKeydown=function(e){var t=e,o=t.key;("Escape"===o||t.ctrlKey&&["c","C","d","D"].indexOf(o)>=0)&&(n.revokeConsoleWriters(),L.dispatch({type:k.RELEASE_CONSOLE}))},n.getRevocableConsoleWriter=function(){var e=!1;return{revoke:function(){e=!0},writeToConsole:function(t){e||n.writeToConsole(t)}}},n.revokeConsoleWriters=function(){n.consoleWriters.forEach(function(e){e.revoke()}),n.consoleWriters=[]},n.runCommand=function(e){var t=e.split(" "),o=Object(m.a)(t),a=o[0],r=o.slice(1),i=G[a];if(n.writeToConsole("".concat(Z()).concat(e)),i){var c=n.getRevocableConsoleWriter();n.consoleWriters.push(c),L.dispatch({type:k.LOCK_CONSOLE}),i.run({args:r,writeToConsole:c.writeToConsole}).then(function(){L.dispatch({type:k.RELEASE_CONSOLE})})}else n.writeToConsole("I don't know how to ".concat(a))},n.writeToConsole=function(e){n.setState(function(t){return{terminalHistory:Object(p.a)(t.terminalHistory).concat([{content:e,id:f()}])}})},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeydown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeydown)}},{key:"render",value:function(){var e=this.state.terminalHistory,t=this.props.consoleInteractive;return a.a.createElement("div",{className:"terminal"},a.a.createElement(Q,{terminalHistory:e}),a.a.createElement("form",{className:"input-form ".concat(t?"active":"")},a.a.createElement("span",{className:"input-prompt"},Z()),a.a.createElement(X,{writeToConsole:this.writeToConsole,handleSubmit:this.runCommand})))}}]),t}(a.a.Component);var te=Object(z.b)(function(e){return{consoleInteractive:e.consoleInteractive}})(ee),ne="a_quiet_forest",oe=function(e){function t(e){var n;return Object(c.a)(this,t),n=Object(u.a)(this,Object(l.a)(t).call(this,e)),S||(S=!0,w.forEach(function(e){C[e.slug]=new g(e)}),j.forEach(function(e){C[e[0]].neighborSlugs.push(e[1]),C[e[1]].neighborSlugs.push(e[0])}),E.forEach(function(e){C[e.locationSlug].itemSlugs.push(e.slug)})),J||(J=!0,[new v,new O,new H,new D,new W,new R,new F,new q,new B].forEach(function(e){M[e.command]=e})),V||(V=!0,E.forEach(function(e){K[e.slug]=new x(e)})),L.dispatch({type:k.SET_LOCATION,value:ne}),n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"main"},a.a.createElement(te,null))}}]),t}(a.a.Component);i.a.render(a.a.createElement(z.a,{store:L},a.a.createElement(oe,null)),document.getElementById("root"))}},[[23,2,1]]]);
//# sourceMappingURL=main.069ea389.chunk.js.map