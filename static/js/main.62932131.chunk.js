(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(t){t.exports=[{slug:"a_quiet_forest",description:"It is early morning. Cold rain is melting the remaining pieces of ice and snow clinging to the evergreens and you can hear them falling around you. Some of them are large enough to be dangerous, but mostly it is just uncomfortable. Your cotton blouse is not keeping you warm."},{slug:"a_cold_cabin",description:"it is a cold cabin"},{slug:"somebody_once_loved",description:"Someone somebody once loved, probably, is sitting at an old kitchen table. They are an adult, but beyond that you struggle to make out anything about them. The stench is magnificent."}]},17:function(t){t.exports=[["a_quiet_forest","a_cold_cabin"],["a_cold_cabin","somebody_once_loved"]]},20:function(t,e,n){t.exports=n(29)},25:function(t,e,n){},29:function(t,e,n){"use strict";n.r(e);var o=n(5),a=n.n(o),r=n(12),c=n.n(r),i=(n(25),n(0)),u=n(1),l=n(3),s=n(2),f=n(4),m=n(10),d=n(13),h=n(18);function p(t){return t?(t^16*Math.random()>>t/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,p)}var b,y=function(){function t(){Object(i.a)(this,t),this.command=""}return Object(u.a)(t,[{key:"run",value:function(t){throw"not implemented"}}]),t}(),g=function(t){function e(){var t,n;Object(i.a)(this,e);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(l.a)(this,(t=Object(s.a)(e)).call.apply(t,[this].concat(a)))).command="echo",n}return Object(f.a)(e,t),Object(u.a)(e,[{key:"run",value:function(t){var e=t.args;(0,t.writeToConsole)(e.join(" "))}}]),e}(y),v=function(t){function e(){var t,n;Object(i.a)(this,e);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(l.a)(this,(t=Object(s.a)(e)).call.apply(t,[this].concat(a)))).command="help",n}return Object(f.a)(e,t),Object(u.a)(e,[{key:"run",value:function(t){(0,t.writeToConsole)("the following utilities are available: ".concat(Object.keys(N).join(", ")))}}]),e}(y),O=n(19),w=n(14),j=function t(e){var n=e.description,o=e.slug;Object(i.a)(this,t),this.neighbors=[],this.description=n,this.slug=o},E=new j({description:"locations are still loading",slug:"loading"});!function(t){t.SET_LOCATION="SET_LOCATION"}(b||(b={}));var T={location:E};var C=Object(w.a)(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case b.SET_LOCATION:return Object(O.a)({},t,{location:e.value});default:return t}}),k=function(t){function e(){var t,n;Object(i.a)(this,e);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(l.a)(this,(t=Object(s.a)(e)).call.apply(t,[this].concat(a)))).command="ls",n}return Object(f.a)(e,t),Object(u.a)(e,[{key:"run",value:function(t){(0,t.writeToConsole)(C.getState().location.neighbors.map(function(t){return t.slug}).sort().join("    "))}}]),e}(y),H=function(t){function e(){var t,n;Object(i.a)(this,e);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(l.a)(this,(t=Object(s.a)(e)).call.apply(t,[this].concat(a)))).responses=["I don't remember","But I am glad you asked. I am glad you are here.","I don't know who you are","You are an echo of an echo","You are a grease smudge on a screen","You were a mistake","You are a dog lover","Or you were a dog lover"],n.command="whoami",n}return Object(f.a)(e,t),Object(u.a)(e,[{key:"run",value:function(t){var e=t.writeToConsole;this.responses.forEach(function(t,n){window.setTimeout(function(){e(t)},1e3+2500*n)})}}]),e}(y),I=function(t){function e(){var t,n;Object(i.a)(this,e);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(l.a)(this,(t=Object(s.a)(e)).call.apply(t,[this].concat(a)))).command="pwd",n}return Object(f.a)(e,t),Object(u.a)(e,[{key:"run",value:function(t){(0,t.writeToConsole)(C.getState().location.description)}}]),e}(y),_=function(t){function e(){var t,n;Object(i.a)(this,e);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(l.a)(this,(t=Object(s.a)(e)).call.apply(t,[this].concat(a)))).command="cd",n}return Object(f.a)(e,t),Object(u.a)(e,[{key:"run",value:function(t){var e=t.args,n=t.writeToConsole,o=C.getState().location.neighbors.find(function(t){return t.slug===e[0]});o?C.dispatch({type:b.SET_LOCATION,value:o}):n("invalid location ".concat(e[0]))}}]),e}(y),S={},A=!1;var N=S,P="~/ > ",V=function(t){function e(){var t,n;Object(i.a)(this,e);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(l.a)(this,(t=Object(s.a)(e)).call.apply(t,[this].concat(a)))).state={terminalHistory:[{content:"welcome to the forest",id:p()},{content:"feel free to look around",id:p()}],commandHistory:[],currentPlaceInHistory:-1},n.inputEl=null,n.handleKeyDown=function(t){switch(t.key){case"ArrowUp":n.goBackInHistory(),n.moveCursorToEnd();break;case"ArrowDown":n.goForwardInHistory(),n.moveCursorToEnd();break;case"Tab":t.preventDefault(),n.tabComplete()}},n.tabComplete=function(){if(""!==n.inputValue){var t=n.inputValue.split(" "),e=Object(h.a)(t,2),o=e[0],a=e[1];"undefined"===typeof a&&(a="");var r=C.getState().location.neighbors.filter(function(t){return 0===t.slug.indexOf(a)}).map(function(t){return t.slug});1===r.length?n.inputValue="".concat(o," ").concat(r[0]):r.length>1&&n.writeToConsole(r.reduce(function(t,e){return"".concat(t,"    ").concat(e)}))}},n.goBackInHistory=function(){n.setState(function(t){return t.currentPlaceInHistory===t.commandHistory.length+1?null:{currentPlaceInHistory:t.currentPlaceInHistory+1}},function(){var t=n.state.commandHistory[n.state.currentPlaceInHistory];t&&(n.inputValue=t.content)})},n.moveCursorToEnd=function(){window.setTimeout(function(){n.inputEl&&(n.inputEl.selectionStart=1e3)},0)},n.goForwardInHistory=function(){n.setState(function(t){return-1===t.currentPlaceInHistory?null:{currentPlaceInHistory:t.currentPlaceInHistory-1}},function(){-1===n.state.currentPlaceInHistory&&(n.inputValue="");var t=n.state.commandHistory[n.state.currentPlaceInHistory];t&&(n.inputValue=t.content)})},n.handleSubmit=function(t){t.preventDefault();var e=n.inputValue;n.inputValue="",n.addToCommandHistory(e);var o=e.split(" "),a=Object(d.a)(o),r=a[0],c=a.slice(1),i=N[r];n.writeToConsole("".concat(P).concat(e)),i?i.run({args:c,writeToConsole:n.writeToConsole}):n.writeToConsole("I don't know how to ".concat(r))},n.addToCommandHistory=function(t){n.setState(function(e){return{commandHistory:[{content:t,id:p()}].concat(Object(m.a)(e.commandHistory)),currentPlaceInHistory:-1}})},n.writeToConsole=function(t){n.setState(function(e){return{terminalHistory:Object(m.a)(e.terminalHistory).concat([{content:t,id:p()}])}})},n}return Object(f.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){var t=this;return a.a.createElement("div",{className:"terminal",onClick:function(){t.inputEl&&t.inputEl.focus()},onKeyDown:this.handleKeyDown},a.a.createElement("pre",{className:"terminal-buffer"},this.state.terminalHistory.reduce(function(t,e){return"".concat(t,"\n").concat(e.content)},"")),a.a.createElement("form",{className:"input-form",onSubmit:this.handleSubmit},a.a.createElement("span",{className:"input-prompt"},P),a.a.createElement("input",{className:"input",type:"text",ref:function(e){t.inputEl=e,t.inputEl&&t.inputEl.focus()}})))}},{key:"inputValue",get:function(){return this.inputEl?this.inputEl.value:""},set:function(t){this.inputEl&&(this.inputEl.value=t)}}]),e}(a.a.Component),D=n(16),x=n(17),L={},Y=!1;var B=L,q="a_quiet_forest",K=function(t){function e(t){var n;return Object(i.a)(this,e),n=Object(l.a)(this,Object(s.a)(e).call(this,t)),Y||(Y=!0,D.forEach(function(t){L[t.slug]=new j(t)}),x.forEach(function(t){L[t[0]].neighbors.push(L[t[1]]),L[t[1]].neighbors.push(L[t[0]])})),A||(A=!0,[new g,new v,new k,new H,new _,new I].forEach(function(t){S[t.command]=t})),C.dispatch({type:b.SET_LOCATION,value:B[q]}),n}return Object(f.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){return a.a.createElement("div",{className:"main"},a.a.createElement(V,null))}}]),e}(a.a.Component);c.a.render(a.a.createElement(K,null),document.getElementById("root"))}},[[20,2,1]]]);
//# sourceMappingURL=main.62932131.chunk.js.map