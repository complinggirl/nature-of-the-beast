{"version":3,"sources":["utils/uuid.js","utilities/UtilityManifest.ts","utilities/Echo.ts","utilities/BaseUtility.ts","components/Terminal.tsx","index.tsx","components/App.tsx"],"names":["b","a","Math","random","toString","replace","manifest","echo","args","join","Terminal","state","terminalHistory","content","id","uuid","commandHistory","currentPlaceInHistory","inputEl","handleKeyDown","e","key","_this","goBackInHistory","goForwardInHistory","writeToConsole","setState","length","command","inputValue","handleSubmit","preventDefault","value","addToCommandHistory","_value$split","split","_value$split2","Object","toArray","utilityName","slice","utility","UtilityManifest","run","concat","toConsumableArray","_this2","this","react_default","createElement","className","onClick","focus","onKeyDown","reduce","memo","historyItem","onSubmit","type","ref","React","Component","ReactDOM","render","Terminal_Terminal","document","getElementById"],"mappings":"uPAGe,SAASA,EAAEC,GACzB,OAAOA,GACHA,EAAsB,GAAhBC,KAAKC,UAAmBF,EAAI,GAAKG,SAAS,KAChD,CAAC,MAAQ,KAAO,KAAO,KAAO,MAAMC,QAAQ,SAAUL,OCC5CM,EAJuC,CACrDC,sLCDWC,GACV,OAAOA,EAAKC,KAAK,6GCHPD,GACV,KAAM,6BCsBaE,6MACpBC,MAAgB,CACfC,gBAAiB,CAChB,CAAEC,QAAS,wBAAyBC,GAAIC,KACxC,CAAEF,QAAS,2BAA4BC,GAAIC,MAE5CC,eAAgB,GAChBC,uBAAwB,KAGjBC,QAA4B,OAE5BC,cAAgB,SAACC,GACxB,OAAQA,EAAEC,KACT,IAAK,UACJC,EAAKC,kBACL,MACD,IAAK,YACJD,EAAKE,qBACL,MACD,IAAK,MACJF,EAAKG,eAAe,wCAOfF,gBAAkB,WACzBD,EAAKI,SACJ,SAAAf,GACC,GACCA,EAAMM,wBACNN,EAAMK,eAAeW,OAAS,EAK/B,MAAO,CACNV,sBAAuBN,EAAMM,sBAAwB,IAGvD,WACC,IAAMW,EAAUN,EAAKX,MAAMK,eAC1BM,EAAKX,MAAMM,uBAGRW,IACHN,EAAKO,WAAaD,EAAQf,cAMtBW,mBAAqB,WAC5BF,EAAKI,SACJ,SAAAf,GACC,IAAqC,IAAjCA,EAAMM,sBAIV,MAAO,CACNA,sBAAuBN,EAAMM,sBAAwB,IAGvD,YAC2C,IAAtCK,EAAKX,MAAMM,wBACdK,EAAKO,WAAa,IAGnB,IAAMD,EAAUN,EAAKX,MAAMK,eAC1BM,EAAKX,MAAMM,uBAGRW,IACHN,EAAKO,WAAaD,EAAQf,cAgBtBiB,aAAe,SAACV,GACvBA,EAAEW,iBAEF,IAAMC,EAAQV,EAAKO,WACnBP,EAAKO,WAAa,GAElBP,EAAKW,oBAAoBD,GANsC,IAAAE,EAQhCF,EAAMG,MAAM,KARoBC,EAAAC,OAAAC,EAAA,EAAAD,CAAAH,GAQxDK,EARwDH,EAAA,GAQxC5B,EARwC4B,EAAAI,MAAA,GAUzDC,EAAUC,EAAgBH,GAE3BE,EAKLnB,EAAKG,eAAegB,EAAQE,IAAInC,IAJ/Bc,EAAKG,eAAL,wBAAAmB,OAA4CL,OAOtCN,oBAAsB,SAACD,GAC9BV,EAAKI,SAAS,SAAAf,GAAK,MAAK,CACvBK,eAAc,CACb,CACCH,QAASmB,EACTlB,GAAIC,MAHQ6B,OAAAP,OAAAQ,EAAA,EAAAR,CAKV1B,EAAMK,iBAEVC,uBAAwB,QAIlBQ,eAAiB,SAACO,GACzBV,EAAKI,SAAS,SAAAf,GAAK,MAAK,CACvBC,gBAAgByB,OAAAQ,EAAA,EAAAR,CACZ1B,EAAMC,iBADKgC,OAAA,CAEd,CACC/B,QAASmB,EACTlB,GAAIC,mFAMC,IAAA+B,EAAAC,KACR,OACCC,EAAA/C,EAAAgD,cAAA,OACCC,UAAU,WACVC,QAAS,WACRL,EAAK5B,SAAW4B,EAAK5B,QAAQkC,SAE9BC,UAAWN,KAAK5B,eAEhB6B,EAAA/C,EAAAgD,cAAA,OAAKC,UAAU,mBACbH,KAAKpC,MAAMC,gBAAgB0C,OAC3B,SAACC,EAAMC,GAAP,SAAAZ,OACIW,EADJ,MAAAX,OACaY,EAAY3C,UACzB,KAIFmC,EAAA/C,EAAAgD,cAAA,QAAMC,UAAU,aAAaO,SAAUV,KAAKjB,cAC3CkB,EAAA/C,EAAAgD,cAAA,QAAMC,UAAU,gBA5JA,sBA6JhBF,EAAA/C,EAAAgD,cAAA,SACCC,UAAU,QACVQ,KAAK,OACLC,IAAK,SAAAvC,GACJ0B,EAAK5B,QAAUE,EACf0B,EAAK5B,SAAW4B,EAAK5B,QAAQkC,gDA9ElC,OAAOL,KAAK7B,SAAW6B,KAAK7B,QAAQc,oBAGdA,GAClBe,KAAK7B,UACR6B,KAAK7B,QAAQc,MAAQA,UAvFc4B,IAAMC,WCnB5CC,IAASC,OAAOf,EAAA/C,EAAAgD,cCFD,WACd,OACCD,EAAA/C,EAAAgD,cAAA,OAAKC,UAAU,QACdF,EAAA/C,EAAAgD,cAACe,EAAD,QDDa,MAASC,SAASC,eAAe","file":"static/js/main.082d54e9.chunk.js","sourcesContent":["// simplest UUID implementation\n// https://gist.github.com/jed/982883\n\nexport default function b(a) {\n\treturn a\n\t\t? (a ^ ((Math.random() * 16) >> (a / 4))).toString(16)\n\t\t: ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, b);\n}\n","import Echo from './Echo';\nimport BaseUtility from './BaseUtility';\n\nconst manifest: { [s: string]: typeof BaseUtility } = {\n\techo: Echo\n};\n\nexport default manifest;\n","import BaseUtility from './BaseUtility';\n\nexport default class Echo extends BaseUtility {\n\tstatic run(args) {\n\t\treturn args.join(' ');\n\t}\n}\n","export default class BaseUtility {\n\tstatic run(args: string[]): string {\n\t\tthrow 'not implemented';\n\t};\n}\n","import React from 'react';\nimport uuid from '../utils/uuid';\nimport UtilityManifest from '../utilities/UtilityManifest';\n\ninterface ICommandItem {\n\tcontent: string;\n\tid: string;\n}\n\ninterface IHistoryItem {\n\tcontent: string;\n\tid: string;\n}\n\ninterface IState {\n\tcommandHistory: ICommandItem[];\n\tterminalHistory: IHistoryItem[];\n\tcurrentPlaceInHistory?: number;\n}\n\ninterface IProps {}\n\nconst INPUT_PROMPT = '~/a/cool/forest > ';\n\nexport default class Terminal extends React.Component<IProps, IState> {\n\tstate: IState = {\n\t\tterminalHistory: [\n\t\t\t{ content: 'welcome to the forest', id: uuid() },\n\t\t\t{ content: 'feel free to look around', id: uuid() }\n\t\t],\n\t\tcommandHistory: [],\n\t\tcurrentPlaceInHistory: -1\n\t};\n\n\tprivate inputEl: HTMLInputElement = null;\n\n\tprivate handleKeyDown = (e: React.KeyboardEvent<HTMLDivElement>) => {\n\t\tswitch (e.key) {\n\t\t\tcase 'ArrowUp':\n\t\t\t\tthis.goBackInHistory();\n\t\t\t\tbreak;\n\t\t\tcase 'ArrowDown':\n\t\t\t\tthis.goForwardInHistory();\n\t\t\t\tbreak;\n\t\t\tcase 'Tab':\n\t\t\t\tthis.writeToConsole('tab completion not yet available');\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\tprivate goBackInHistory = () => {\n\t\tthis.setState(\n\t\t\tstate => {\n\t\t\t\tif (\n\t\t\t\t\tstate.currentPlaceInHistory ===\n\t\t\t\t\tstate.commandHistory.length + 1\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\tcurrentPlaceInHistory: state.currentPlaceInHistory + 1\n\t\t\t\t};\n\t\t\t},\n\t\t\t() => {\n\t\t\t\tconst command = this.state.commandHistory[\n\t\t\t\t\tthis.state.currentPlaceInHistory\n\t\t\t\t];\n\n\t\t\t\tif (command) {\n\t\t\t\t\tthis.inputValue = command.content;\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t};\n\n\tprivate goForwardInHistory = () => {\n\t\tthis.setState(\n\t\t\tstate => {\n\t\t\t\tif (state.currentPlaceInHistory === -1) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\tcurrentPlaceInHistory: state.currentPlaceInHistory - 1\n\t\t\t\t};\n\t\t\t},\n\t\t\t() => {\n\t\t\t\tif (this.state.currentPlaceInHistory === -1) {\n\t\t\t\t\tthis.inputValue = '';\n\t\t\t\t}\n\n\t\t\t\tconst command = this.state.commandHistory[\n\t\t\t\t\tthis.state.currentPlaceInHistory\n\t\t\t\t];\n\n\t\t\t\tif (command) {\n\t\t\t\t\tthis.inputValue = command.content;\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t};\n\n\tprivate get inputValue(): string {\n\t\treturn this.inputEl && this.inputEl.value;\n\t}\n\n\tprivate set inputValue(value: string) {\n\t\tif (this.inputEl) {\n\t\t\tthis.inputEl.value = value;\n\t\t}\n\t}\n\n\tprivate handleSubmit = (e: React.FormEvent<HTMLFormElement>) => {\n\t\te.preventDefault();\n\n\t\tconst value = this.inputValue;\n\t\tthis.inputValue = '';\n\n\t\tthis.addToCommandHistory(value);\n\n\t\tconst [utilityName, ...args] = value.split(' ');\n\n\t\tconst utility = UtilityManifest[utilityName];\n\n\t\tif (!utility) {\n\t\t\tthis.writeToConsole(`unrecognized command ${utilityName}`);\n\t\t\treturn;\n\t\t}\n\n\t\tthis.writeToConsole(utility.run(args));\n\t};\n\n\tprivate addToCommandHistory = (value: string) => {\n\t\tthis.setState(state => ({\n\t\t\tcommandHistory: [\n\t\t\t\t{\n\t\t\t\t\tcontent: value,\n\t\t\t\t\tid: uuid()\n\t\t\t\t},\n\t\t\t\t...state.commandHistory\n\t\t\t],\n\t\t\tcurrentPlaceInHistory: -1\n\t\t}));\n\t};\n\n\tprivate writeToConsole = (value: string) => {\n\t\tthis.setState(state => ({\n\t\t\tterminalHistory: [\n\t\t\t\t...state.terminalHistory,\n\t\t\t\t{\n\t\t\t\t\tcontent: value,\n\t\t\t\t\tid: uuid()\n\t\t\t\t}\n\t\t\t]\n\t\t}));\n\t};\n\n\trender() {\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclassName=\"terminal\"\n\t\t\t\tonClick={() => {\n\t\t\t\t\tthis.inputEl && this.inputEl.focus();\n\t\t\t\t}}\n\t\t\t\tonKeyDown={this.handleKeyDown}\n\t\t\t>\n\t\t\t\t<pre className=\"terminal-buffer\">\n\t\t\t\t\t{this.state.terminalHistory.reduce(\n\t\t\t\t\t\t(memo, historyItem) =>\n\t\t\t\t\t\t\t`${memo}\\n${historyItem.content}`,\n\t\t\t\t\t\t''\n\t\t\t\t\t)}\n\t\t\t\t</pre>\n\n\t\t\t\t<form className=\"input-form\" onSubmit={this.handleSubmit}>\n\t\t\t\t\t<span className=\"input-prompt\">{INPUT_PROMPT}</span>\n\t\t\t\t\t<input\n\t\t\t\t\t\tclassName=\"input\"\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tref={e => {\n\t\t\t\t\t\t\tthis.inputEl = e;\n\t\t\t\t\t\t\tthis.inputEl && this.inputEl.focus();\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './styles/index.scss';\nimport App from './components/App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n","import React from 'react';\nimport Terminal from './Terminal';\n\nexport default function App() {\n\treturn (\n\t\t<div className=\"main\">\n\t\t\t<Terminal />\n\t\t</div>\n\t);\n}\n"],"sourceRoot":""}